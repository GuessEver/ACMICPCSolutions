B
画个图注意到对角线会有很多重复计算，所以跑四次分别预处理出所有对角线（怎么处理画个图嘛，不好说 = =，或者看代码）

